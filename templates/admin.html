{% extends 'base.html' %}

{% block pageheading %}Administration{% endblock %}

{% block main %}
<h3>Category Admin</h3>
<h4>Add a category</h4>
<form class="myform" method="POST" action="/add_category">
  <div class="form-group">
    <div class="form-label"><label for="name">Category name:</label></div>
    <div class="form-element"><input type="text" name="name" id="name" required></div>
  </div>
  <div class="form-group">
    <div class="form-label"></div>
    <div class="form-element"><input type="submit" value="Add Category"></div>
  </div>
</form>
<h4>Delete a Category</h4>
<form class="myform" method="POST" action="/delete_category">
  <div class="form-group">
    <div class="form-label"><label for="name">Category name:</label></div>
    <div class="form-element">
      <select id="category_id" name="category_id">
        {% for category in categories %}
        <option value="{{ category[0] }}, {{ category[1] }}">{{ category[1] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="form-group">
    <div class="form-label"></div>
    <div class="form-element"><input type="submit" value="Delete Category"></div>
  </div>
</form>

<h3>Product Admin</h3>
<h4>Add a Product</h4>
<form class="myform" method="POST" action="/add_product">
  <div class="form-group">
    <div class="form-label"><label for="name">Product name:</label></div>
    <div class="form-element"><input type="text" name="name" id="name" required></div>
  </div>
  <div class="form-group">
    <div class="form-label"><label for="description">Product description:</label></div>
    <div class="form-element"><input type="text" name="description" id="description" required></div>
  </div>
    <div class="form-group">
    <div class="form-label"><label for="volume">Product volume (ml):</label></div>
    <div class="form-element"><input type="number" name="volume" id="volume" min="0" step="10" required></div>
  </div>
    <div class="form-group">
    <div class="form-label"><label for="image">Product image:</label></div>
    <div class="form-element"><input type="text" name="image" id="image" required></div>
  </div>
    <div class="form-group">
    <div class="form-label"><label for="price">Product price:</label></div>
    <div class="form-element"><input type="number" name="price" id="price" min="0" step=".1" required></div>
  </div>
    <div class="form-group">
    <div class="form-label"><label for="name">Product category:</label></div>
    <div class="form-element">
      <select id="product_category_id" name="product_category_id">
        {% for category in categories %}
        <option value="{{ category[0] }}, {{ category[1] }}">{{ category[1] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="form-group">
    <div class="form-label"></div>
    <div class="form-element"><input type="submit" value="Add Product"></div>
  </div>
</form>
<h4>Delete a Product</h4>
<form class="myform" method="POST" action="/delete_product">
  <div class="form-group">
    <div class="form-label"><label for="name">Product name:</label></div>
    <div class="form-element">
      <select id="product_id" name="product_id">
        {% for product in products %}
        <option value="{{ product[0] }}, {{ product[1] }}">{{ product[1] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="form-group">
    <div class="form-label"></div>
    <div class="form-element"><input type="submit" value="Delete Product"></div>
  </div>
</form>

<h3>User Admin</h3>
<h4>Promote user to admin</h4>
<form class="myform" method="POST" action="/promote_user">
  <div class="form-group">
    <div class="form-label"><label for="name">User name:</label></div>
    <div class="form-element">
      <select id="promote_user_id" name="promote_user_id">
        {% for user in users %}
          {% if user[5] != 1 %}
            <option value="{{ user[0] }}, {{ user[1] }} {{ user[2] }}">{{ user[1] }} {{ user[2] }}</option>
          {% endif %}
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="form-group">
    <div class="form-label"></div>
    <div class="form-element"><input type="submit" value="Promote user to admin"></div>
  </div>
</form>
<h4>Demote admin to user</h4>
<form class="myform" method="POST" action="/demote_user">
  <div class="form-group">
    <div class="form-label"><label for="name">User name:</label></div>
    <div class="form-element">
      <select id="demote_user_id" name="demote_user_id">
        {% for user in users %}
          {% if (user[5] != 0) and (user[0] != active_user.get('userid')) %}
            <option value="{{ user[0] }}, {{ user[1] }} {{ user[2] }}">{{ user[1] }} {{ user[2] }}</option>
          {% endif %}
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="form-group">
    <div class="form-label"></div>
    <div class="form-element"><input type="submit" value="Demote admin to user"></div>
  </div>
</form>
<h4>Delete a User</h4>
<form class="myform" method="POST" action="/delete_user">
  <div class="form-group">
    <div class="form-label"><label for="name">User name:</label></div>
    <div class="form-element">
      <select id="user_id" name="user_id">
        {% for user in users %}
          {% if user[0] != active_user.get('userid') %}
            <option value="{{ user[0] }}, {{ user[1] }} {{ user[2] }}">{{ user[1] }} {{ user[2] }}</option>
          {% endif %}
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="form-group">
    <div class="form-label"></div>
    <div class="form-element"><input type="submit" value="Delete User"></div>
  </div>
</form>
{% endblock %}